(function(t){function e(e){for(var a,r,o=e[0],c=e[1],h=e[2],l=0,m=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);g&&g(e);while(m.length)m.shift()();return n.push.apply(n,h||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],a=!0,o=1;o<i.length;o++){var c=i[o];0!==s[c]&&(a=!1)}a&&(n.splice(e--,1),t=r(r.s=i[0]))}return t}var a={},s={app:0},n=[];function r(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=a,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/vue-image-cropper-simple/dist/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var h=0;h<o.length;h++)e(o[h]);var g=c;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},2395:function(t,e,i){},"51cc":function(t,e,i){"use strict";var a=i("5f3f"),s=i.n(a);s.a},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"my-title"},[t._v(" vue-image-cropper-simple ")]),i("div",{staticClass:"gogo"},[i("img",{attrs:{alt:"Vue logo",src:t.imageSrc},on:{click:t.go}}),i("p",[t._v("点击图片上传")])]),i("image-cropper",{attrs:{isVisible:t.isVisible,model:"base64"},on:{"update:isVisible":function(e){t.isVisible=e},"update:is-visible":function(e){t.isVisible=e},transmitImageData:t.transmitImageData}})],1)},n=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isVisible?i("div",{staticClass:"vue-image-cropper"},[i("div",{staticClass:"vic-wrap"},[i("div",{staticClass:"vic-header"},[i("span",[t._v("图片裁剪")]),i("i",{on:{click:t.close}},[t._v("x")])]),i("div",{staticClass:"vic-main"},[i("div",{staticClass:"vic-img-box",on:{mousedown:t.mouseDown,mousemove:t.mouseMove,mouseup:t.mouseUp,wheel:t.Wheel}},[i("canvas",{ref:"canvas",attrs:{width:t.CanvasWidth,height:t.CanvasHeight}}),i("div",{staticClass:"vic-main-mark",style:{width:t.MarkWidth+"px",height:t.MarkHeight+"px",left:t.MarkLeft+"px",top:t.MarkTop+"px"}})]),i("div",{staticClass:"vic-preview-box"},[i("ul",[i("li",[i("div",{staticClass:"vic-pb-square"},[i("img",{attrs:{src:t.ImgUrl}}),i("br"),i("span",[t._v("方形预览")])])]),i("li",[i("div",{staticClass:"vic-pb-cricle"},[i("img",{attrs:{src:t.ImgUrl}}),i("br"),i("span",[t._v("圆形预览")])])])])]),i("div",{staticClass:"vic-actions"},[i("div",{staticClass:"vic-right-btn"},[i("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.uploadImage}}),i("button",{on:{click:t.toggleUploadImage}},[t._v(" "+t._s(0===t.status?"上传图片":"重新上传")+" ")]),i("button",{on:{click:t.saveImage}},[t._v("保存")])])])])])]):t._e()},o=[];i("d3b7"),i("ac1f"),i("1276"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7");function c(t,e){var i=null;return function(){var a=this;i&&clearTimeout(i),i=setTimeout((function(){a[t]()}),e)}}function h(t){t=t.split(",")[1],t=window.atob(t);for(var e=new Uint8Array(t.length),i=0;i<t.length;i++)e[i]=t.charCodeAt(i);var a=new Blob([e],{type:"image/png"});return a}var g={data:function(){var t=352,e=300;return{CanvasWidth:t,CanvasHeight:t,MarkWidth:e,MarkHeight:e,MarkLeft:(t-e)/2,MarkTop:(t-e)/2,ImageWidth:0,ImageHeight:0,ImageLeft:0,ImageTop:0,ImgUrl:null,status:0}},mounted:function(){console.log(this.model)},props:{isVisible:{type:Boolean,default:!1},model:{type:String,default:"base64"}},methods:{close:function(){this.newImage&&(this.newImage=null),this.status=0,this.$emit("update:isVisible",!1),this.ImgUrl=null},toggleUploadImage:function(){this.$refs.file.click()},uploadImage:function(){var t=this,e=this.$refs.file.files[0];if(e){var i=new FileReader;i.readAsDataURL(e),i.onload=function(e){t.newImage=new Image,t.newImage.src=e.target.result,t.newImage.onload=function(){t.ImageWidth=t.newImage.width,t.ImageHeight=t.newImage.height;var e=1;t.ImageWidth>t.ImageHeight?(e=t.ImageWidth/t.CanvasWidth,t.ImageWidth=t.CanvasWidth,t.ImageHeight=t.ImageHeight/e):(e=t.ImageHeight/t.CanvasHeight,t.ImageHeight=t.CanvasHeight,t.ImageWidth=t.ImageWidth/e),t.ImageLeft=(t.CanvasWidth-t.ImageWidth)/2,t.ImageTop=(t.CanvasHeight-t.ImageHeight)/2,t.drawImage(t.newImage),t.previewImage(),t.status=1}}}},drawImage:function(){this.CTX=this.$refs.canvas.getContext("2d"),this.CTX.clearRect(0,0,this.CanvasWidth,this.CanvasHeight),this.CTX.drawImage(this.newImage,this.ImageLeft,this.ImageTop,this.ImageWidth,this.ImageHeight)},makeScaleChange:function(t){0===t?(this.ImageWidth-=20,this.ImageHeight-=20):(this.ImageWidth+=20,this.ImageHeight+=20),this.drawImage()},mouseDown:function(t){this.newImage&&(this.startX=t.clientX,this.startY=t.clientY,this.isDrop=!0)},mouseMove:function(t){this.isDrop&&this.newImage&&(this.changeX=t.clientX-this.startX,this.changeY=t.clientY-this.startY,(Math.abs(this.changeX)>10||Math.abs(this.changeY)>10)&&(this.ImageLeft+=this.changeX,this.ImageTop+=this.changeY,this.drawImage(),this.startX=t.clientX,this.startY=t.clientY))},mouseUp:function(){this.isDrop=!1,this.previewImage()},Wheel:function(t){this.newImage&&(t.deltaY>0?this.makeScaleChange(1):this.makeScaleChange(0),this.previewImageDebounce())},previewImageDebounce:c("previewImage",600),previewImage:function(){if(this.newImage){var t=this.CTX.getImageData(this.MarkLeft,this.MarkTop,this.MarkWidth,this.MarkHeight),e=document.createElement("canvas"),i=e.getContext("2d");e.width=this.MarkWidth,e.height=this.MarkHeight,i.putImageData(t,0,0,0,0,this.MarkWidth,this.MarkHeight);var a=e.toDataURL("image/png");this.ImgUrl=a}},saveImage:function(){"base64"==this.model?this.$emit("transmitImageData",this.ImgUrl):this.$emit("transmitImageData",h(this.ImgUrl)),this.close()}}},l=g,m=(i("51cc"),i("2877")),u=Object(m["a"])(l,r,o,!1,null,"4b6136e0",null),p=u.exports,d={name:"App",data:function(){return{isVisible:!1,imageSrc:"/logo.png"}},methods:{go:function(){this.isVisible=!this.isVisible},transmitImageData:function(t){this.imageSrc=t}},components:{ImageCropper:p}},f=d,v=(i("7c55"),Object(m["a"])(f,s,n,!1,null,null,null)),I=v.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(I)}}).$mount("#app")},"5f3f":function(t,e,i){},"7c55":function(t,e,i){"use strict";var a=i("2395"),s=i.n(a);s.a}});
//# sourceMappingURL=app.0fa1a517.js.map